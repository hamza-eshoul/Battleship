(()=>{"use strict";const e=(e=5,t=[])=>{let a=e;function s(){a-n.hitTimes==0?n.isSunkStatus=!0:n.isSunkStatus=!1}const n={length:a,hitTimes:0,isSunkStatus:!1,hit:function(){n.hitTimes+=1,s()},isSunk:s,coordinates:t};return n};function t(e){document.querySelector(".myModal").style.display="block",document.querySelector(".myWinner").textContent=`${e}`}let a=[],s=[];let n=(()=>{function n(){!function(){let e=document.getElementById("board2"),t=1,a=1,s=1;for(let n=0;n<10;n++){for(let n=0;n<10;n++){const n=document.createElement("div");n.classList.add("cube"),n.classList.add("text-dark"),n.dataset.computer=t,n.dataset.order=t,n.dataset.row=a,n.dataset.col=s,e.appendChild(n),t+=1,s+=1}a+=1,s=1}}();const n=(()=>{function n(){!function(){function e(e,t="col"){let a=0,n=0,r=[],o=0;if("col"==t){switch(e){case 5:a=60;break;case 4:a=70;break;case 3:a=80;break;case 2:a=90}n=10}else"row"==t&&(a=95,n=1);function c(){r=[],o=0;let s=Math.floor(Math.random()*a)+1;for(let t=1;t<=e;t++){let e=document.querySelector(`[data-computer="${s}"]`);r.push(e),s+=n}if("col"==t)r.forEach((e=>{e.classList.contains("bg-successe")||(o+=1)}));else if("row"==t){let e=r[0].dataset.row;r.forEach((t=>{t.classList.contains("bg-successe")||t.dataset.row!==e||(o+=1)}))}}c(),function e(){o!=r.length?(c(),e()):r.forEach((e=>{e.classList.add("bg-successe"),s.push(e.dataset.order)}))}()}e(5,"row"),e(4,"col"),e(3,"row"),e(3,"col"),e(2,"row")}()}n();let r=e(5,[+a[0],+a[1],+a[2],+a[3],+a[4]]),o=e(4,[+a[5],+a[6],+a[7],+a[8]]),c=e(3,[+a[9],+a[10],+a[11]]),i=e(3,[+a[12],+a[13],+a[14]]),l=e(2,[+a[15],+a[16]]),d=e(5,[+s[0],+s[1],+s[2],+s[3],+s[4]]),u=e(4,[+s[5],+s[6],+s[7],+s[8]]),m=e(3,[+s[9],+s[10],+s[11]]),f=e(3,[+s[12],+s[13],+s[14]]),y=e(2,[+s[15],+s[16]]);function L(){1==r.isSunkStatus&&1==o.isSunkStatus&&1==c.isSunkStatus&&1==i.isSunkStatus&&1==l.isSunkStatus?(S.isPlayer1Sunk=!0,t("The Computer")):1==d.isSunkStatus&&1==u.isSunkStatus&&1==m.isSunkStatus&&1==f.isSunkStatus&&1==y.isSunkStatus&&(S.isComputerSunk=!0,t("You"))}function h(){let e=document.getElementById("playerHeader");e.textContent.includes("Computer")?(e.textContent="Sink Them All !",document.querySelectorAll("[data-player").forEach((e=>{e.classList.add("no-pointer-switch")})),document.querySelectorAll("[data-computer").forEach((e=>{e.classList.remove("no-pointer-switch")}))):e.textContent.includes("Sink")&&(e.textContent="This is the turn of the Computer",function(){let e=Math.floor(100*Math.random()+1),t=document.querySelector(`[data-player="${e}"`);if(t.classList.contains("bg-danger")||t.classList.contains("bg-warning")){function a(){if(t.classList.contains("bg-danger")||t.classList.contains("bg-warning")){let e=Math.floor(100*Math.random()+1);t=document.querySelector(`[data-player="${e}"`),a()}else t.click()}a()}else t.click()}())}const S={placeShip:n,receiveAttack:function(e,t){document.querySelectorAll(`[data-${e}`).forEach((function(e){e.addEventListener("click",(function(){let a=+e.dataset.order;if(e.classList.contains("bg-primary")||e.classList.contains("bg-successe")){for(let s=0;s<5;s++)t[s].coordinates.includes(a)&&(e.classList.add("bg-danger"),e.classList.add("no-pointer"),t[s].hit(),L());h()}else e.classList.add("no-pointer"),e.classList.add("bg-warning"),e.innerHTML='<i class="fa-solid fa-bomb fa-lg"> </i>',h()}))}))},reportSinkStatus:L,isPlayer1Sunk:!1,isComputerSunk:!1,myShipsArray1:[r,o,c,i,l],myShipsArray2:[d,u,m,f,y],switchPlayerTurns:h};return S})();n.receiveAttack("player",n.myShipsArray1),n.receiveAttack("computer",n.myShipsArray2),document.querySelector(".second-selection").classList.remove("d-none"),document.getElementById("playerTurns").classList.remove("d-none"),n.switchPlayerTurns(),document.querySelector(".myButtons").classList.add("none")}return{createFirstPlayerBoard:function(){let e=document.getElementById("board1"),t=1,a=1,s=1;for(let n=0;n<10;n++){for(let n=0;n<10;n++){const n=document.createElement("div");n.classList.add("cube"),n.classList.add("text-dark"),n.dataset.player=t,n.dataset.order=t,n.dataset.row=a,n.dataset.col=s,e.appendChild(n),t+=1,s+=1}a+=1,s=1}},startGame:n,startGameButton:function(){const e=document.getElementById("start");e.addEventListener("click",(()=>{n(),e.classList.add("no-point")}))},restartGameButton:function(){document.querySelector(".myBtn").addEventListener("click",(()=>{location.reload()}))},autoPlaceShips:function(){document.getElementById("auto-place").addEventListener("click",(()=>{document.querySelectorAll("[data-player]").forEach((e=>{e.classList.contains("bg-primary")&&e.classList.remove("bg-primary")})),function(){function e(e,t="col"){let s=0,n=0,r=[],o=0;if("col"==t){switch(e){case 5:s=60;break;case 4:s=70;break;case 3:s=80;break;case 2:s=90}n=10}else"row"==t&&(s=95,n=1);function c(){r=[],o=0;let a=Math.floor(Math.random()*s)+1;for(let t=1;t<=e;t++){let e=document.querySelector(`[data-player="${a}"]`);r.push(e),a+=n}if("col"==t)r.forEach((e=>{e.classList.contains("bg-primary")||(o+=1)}));else if("row"==t){let e=r[0].dataset.row;r.forEach((t=>{t.classList.contains("bg-primary")||t.dataset.row!==e||(o+=1)}))}}c(),function e(){o!=r.length?(c(),e()):r.forEach((e=>{e.classList.add("bg-primary"),a.push(e.dataset.order)}))}()}e(5,"col"),e(4,"row"),e(3,"col"),e(3,"row"),e(2,"col")}()}))},selfPlaceShips:function(){document.getElementById("self-place").addEventListener("click",(()=>{!function(){let e=1,t=5,s=[],n=[],r=0,o=0,c=!1,i=document.querySelectorAll("[data-player]"),l=document.getElementById("rotate");!function d(){if(1==e){function u(){let a=+this.dataset.order;s=[],o=0;for(let n=1;n<=t;n++){let t=document.querySelector(`[data-order="${a}"]`);if(100==a)return void t.classList.add("not-allowed");t.classList.add("bg-warning"),a+=e,s.push(t)}!function(){let e=s[0].dataset.row;s.forEach((t=>{t.dataset.row==e&&(o+=1)})),o!=t&&s.forEach((e=>{e.classList.remove("bg-warning"),e.classList.add("not-allowed")}))}()}function m(){let a=+this.dataset.order;for(let s=1;s<=t+1;s++){let t=document.querySelector(`[data-order="${a}"]`);if(100==a)return t.classList.remove("bg-warning"),void t.classList.remove("not-allowed");t.classList.remove("bg-warning"),t.classList.remove("not-allowed"),a+=e}}function f(){let n=+this.dataset.order;s=[],o=0;for(let r=1;r<=t;r++){let t=document.querySelector(`[data-order="${n}"]`);if(t.classList.contains("not-allowed"))return;t.classList.remove("bg-warning"),t.classList.add("bg-primary"),n+=e,s.push(t),a.push(t.dataset.order)}3==t&&1==c?t-=1:3==t&&0==c?c=!0:2==t?(t=0,document.getElementById("start").click()):t-=1,document.getElementById("start").addEventListener("click",(()=>{document.querySelectorAll("[data-player]").forEach((e=>{e.removeEventListener("click",f)}))}))}function y(){i.forEach((e=>{e.removeEventListener("mouseover",u),e.removeEventListener("mouseleave",m),e.removeEventListener("click",f)})),e=10,l.removeEventListener("click",y),d()}i.forEach((function(e){e.addEventListener("mouseover",u),e.addEventListener("mouseleave",m),e.addEventListener("click",f)})),l.addEventListener("click",y)}else{function L(){let a=+this.dataset.order;r=0,n=[];for(let s=1;s<=t;s++){let t=document.querySelector(`[data-order="${a}"]`);if(null==t){r+=1;break}t.classList.add("bg-warning"),a+=e,n.push(t)}r>0&&n.forEach((e=>{e.classList.remove("bg-warning"),e.classList.add("not-allowed")}))}function h(){let a=+this.dataset.order;for(let s=1;s<=t+1;s++){let t=document.querySelector(`[data-order="${a}"]`);if(null==t)break;t.classList.remove("bg-warning"),t.classList.remove("not-allowed"),a+=e}}function S(){let s=+this.dataset.order;for(let n=1;n<=t;n++){let t=document.querySelector(`[data-order="${s}"]`);if(t.classList.contains("not-allowed"))return;t.classList.remove("bg-warning"),t.classList.add("bg-primary"),a.push(t.dataset.order),s+=e}3==t&&1==c?t-=1:3==t&&0==c?c=!0:2==t?(document.getElementById("start").click(),t=0):t-=1}function v(){i.forEach((e=>{e.removeEventListener("mouseover",L),e.removeEventListener("mouseleave",h),e.removeEventListener("click",S)})),e=1,l.removeEventListener("click",v),d()}i.forEach((function(e){e.addEventListener("mouseover",L),e.addEventListener("mouseleave",h),e.addEventListener("click",S)})),l.addEventListener("click",v)}}()}()}))},resetGame:function(){document.getElementById("reset").addEventListener("click",(()=>{location.reload()}))}}})();n.createFirstPlayerBoard(),n.startGameButton(),n.restartGameButton(),n.autoPlaceShips(),n.selfPlaceShips(),n.resetGame()})();